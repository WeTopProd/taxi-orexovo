{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Desktop/projects/wetop/taxi/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from'react';import styles from'./Car.module.scss';import carBusyIMG from'../../../assets/img/car_busy.png';import carFreeIMG from'../../../assets/img/car_free.png';import cx from'classnames';import{STATUS_CAR_NAMES}from'../../../helpers/dictionaries';import{useDispatcherContext}from'../DispatcherContext';import{useOnClickOutside}from'../../../helpers/hooks';import{orderAssignRequest}from'../../../services/orderService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Car=function Car(_ref){var driverId=_ref.driverId,driverName=_ref.driverName,driverPhone=_ref.driverPhone,carNumber=_ref.carNumber,status=_ref.status;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),carPopupIsOpen=_useState2[0],setCarPopupIsOpen=_useState2[1];var _useDispatcherContext=useDispatcherContext(),ordersAll=_useDispatcherContext.ordersAll;var popupOrdersRef=useRef(null);var openNewOrdersRef=useRef(null);useOnClickOutside(popupOrdersRef,openNewOrdersRef,function(){return setCarPopupIsOpen(false);});var handlerClickOrder=function handlerClickOrder(orderId,driverId){orderAssignRequest(orderId,driverId).then(function(res){return alert(res.data.message);});};var orderFilterByNew=function orderFilterByNew(orders){return orders.status==='new';};var ordersFilter=ordersAll.filter(orderFilterByNew);return/*#__PURE__*/_jsxs(\"div\",{ref:openNewOrdersRef,onClick:function onClick(){return setCarPopupIsOpen(!carPopupIsOpen);},className:styles.car,children:[carPopupIsOpen&&status==='free'?/*#__PURE__*/_jsxs(\"div\",{ref:popupOrdersRef,className:styles.carPopup,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.carPopup_title,children:\"\\u041D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsx(\"ul\",{className:styles.carPopup_list,children:ordersFilter.map(function(order,index){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return handlerClickOrder(order.id,driverId);},className:styles.carPopup_item,children:order.id},index);})})]}):'',/*#__PURE__*/_jsxs(\"div\",{className:styles.image,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.title,children:\"\\u0410\\u0432\\u0442\\u043E\\u043C\\u043E\\u0431\\u0438\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"img\",{src:status==='free'?carFreeIMG:carBusyIMG,width:\"85\",height:\"64\",alt:\"\\u0442\\u0430\\u043A\\u0441\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.number,children:carNumber})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.title,children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.text,children:driverName}),/*#__PURE__*/_jsx(\"h3\",{className:styles.title,children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.text,children:driverPhone}),/*#__PURE__*/_jsx(\"h3\",{className:styles.title,children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"}),/*#__PURE__*/_jsxs(\"p\",{className:styles.text,children:[/*#__PURE__*/_jsx(\"span\",{className:cx(styles.status,status==='free'?styles.status_free:'')}),/*#__PURE__*/_jsx(\"b\",{children:STATUS_CAR_NAMES[status]})]})]})]});};export default Car;","map":{"version":3,"names":["React","useRef","useState","styles","carBusyIMG","carFreeIMG","cx","STATUS_CAR_NAMES","useDispatcherContext","useOnClickOutside","orderAssignRequest","jsx","_jsx","jsxs","_jsxs","Car","_ref","driverId","driverName","driverPhone","carNumber","status","_useState","_useState2","_slicedToArray","carPopupIsOpen","setCarPopupIsOpen","_useDispatcherContext","ordersAll","popupOrdersRef","openNewOrdersRef","handlerClickOrder","orderId","then","res","alert","data","message","orderFilterByNew","orders","ordersFilter","filter","ref","onClick","className","car","children","carPopup","carPopup_title","carPopup_list","map","order","index","id","carPopup_item","image","title","src","width","height","alt","number","text","status_free"],"sources":["/Users/admin/Desktop/projects/wetop/taxi/frontend/src/pages/Dispatcher/Car/Car.jsx"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport styles from './Car.module.scss';\nimport carBusyIMG from '../../../assets/img/car_busy.png';\nimport carFreeIMG from '../../../assets/img/car_free.png';\nimport cx from 'classnames';\nimport { STATUS_CAR_NAMES } from '../../../helpers/dictionaries';\nimport { useDispatcherContext } from '../DispatcherContext';\nimport { useOnClickOutside } from '../../../helpers/hooks';\nimport { orderAssignRequest } from '../../../services/orderService';\n\nconst Car = ({ driverId, driverName, driverPhone, carNumber, status }) => {\n  const [carPopupIsOpen, setCarPopupIsOpen] = useState(false);\n  const { ordersAll } = useDispatcherContext();\n\n  const popupOrdersRef = useRef(null);\n  const openNewOrdersRef = useRef(null);\n\n  useOnClickOutside(popupOrdersRef, openNewOrdersRef, () =>\n    setCarPopupIsOpen(false),\n  );\n\n  const handlerClickOrder = (orderId, driverId) => {\n    orderAssignRequest(orderId, driverId).then((res) =>\n      alert(res.data.message),\n    );\n  };\n\n  const orderFilterByNew = (orders) => orders.status === 'new';\n  const ordersFilter = ordersAll.filter(orderFilterByNew);\n\n  return (\n    <div\n      ref={openNewOrdersRef}\n      onClick={() => setCarPopupIsOpen(!carPopupIsOpen)}\n      className={styles.car}>\n      {carPopupIsOpen && status === 'free' ? (\n        <div ref={popupOrdersRef} className={styles.carPopup}>\n          <h3 className={styles.carPopup_title}>Назначить заказ</h3>\n          <ul className={styles.carPopup_list}>\n            {ordersFilter.map((order, index) => (\n              <li\n                onClick={() => handlerClickOrder(order.id, driverId)}\n                className={styles.carPopup_item}\n                key={index}>\n                {order.id}\n              </li>\n            ))}\n          </ul>\n        </div>\n      ) : (\n        ''\n      )}\n      <div className={styles.image}>\n        <h3 className={styles.title}>Автомобиль</h3>\n        <img\n          src={status === 'free' ? carFreeIMG : carBusyIMG}\n          width=\"85\"\n          height=\"64\"\n          alt=\"такси\"\n        />\n        <p className={styles.number}>{carNumber}</p>\n      </div>\n\n      <div>\n        <h3 className={styles.title}>Имя</h3>\n        <p className={styles.text}>{driverName}</p>\n        <h3 className={styles.title}>Телефон</h3>\n        <p className={styles.text}>{driverPhone}</p>\n        <h3 className={styles.title}>Статус</h3>\n        <p className={styles.text}>\n          <span\n            className={cx(\n              styles.status,\n              status === 'free' ? styles.status_free : '',\n            )}></span>\n          <b>{STATUS_CAR_NAMES[status]}</b>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default Car;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}