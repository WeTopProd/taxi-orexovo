{"ast":null,"code":"import _regeneratorRuntime from\"/Users/admin/Desktop/projects/wetop/taxi/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/admin/Desktop/projects/wetop/taxi/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import{useQuery}from'@tanstack/react-query';import{HOST}from'./api';var BASE_URL_ORDERS=\"\".concat(HOST,\"/orders/\");var BASE_URL_ORDER_ASSIGN=\"\".concat(HOST,\"/assign-order/\");export function fetchOrdersByPage(){return _fetchOrdersByPage.apply(this,arguments);}function _fetchOrdersByPage(){_fetchOrdersByPage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var page,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:page=_args.length>0&&_args[0]!==undefined?_args[0]:1;_context.next=3;return axios.get(BASE_URL_ORDERS,{params:{page:page}});case 3:return _context.abrupt(\"return\",_context.sent);case 4:case\"end\":return _context.stop();}},_callee);}));return _fetchOrdersByPage.apply(this,arguments);}export var fetchOrdersByDriver=function fetchOrdersByDriver(carId){return axios.get(BASE_URL_ORDERS+\"?status=assigned&status=confirmed&driver=\".concat(carId));};export var fetchNewOrders=function fetchNewOrders(){var status=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return axios.get(BASE_URL_ORDERS,{params:{status:status}}).then(function(_ref){var data=_ref.data;return data===null||data===void 0?void 0:data.results;});};export function submitOrder(_x){return _submitOrder.apply(this,arguments);}function _submitOrder(){_submitOrder=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(BASE_URL_ORDERS,data);case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}},_callee2);}));return _submitOrder.apply(this,arguments);}export var QueryNewOrders=function QueryNewOrders(time){return useQuery({queryFn:function queryFn(){return fetchNewOrders('new');},queryKey:['newOrders'],refetchInterval:time,retry:5,onError:function onError(error){console.error(error);}});};export function changeOrderStatus(_x2,_x3){return _changeOrderStatus.apply(this,arguments);}function _changeOrderStatus(){_changeOrderStatus=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(order_id,order_status){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.patch(BASE_URL_ORDERS+\"\".concat(order_id,\"/\"),{status:order_status});case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}},_callee3);}));return _changeOrderStatus.apply(this,arguments);}export function orderAssignRequest(_x4,_x5){return _orderAssignRequest.apply(this,arguments);}function _orderAssignRequest(){_orderAssignRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(order_id,driver_id){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.post(BASE_URL_ORDER_ASSIGN+\"\".concat(order_id,\"/\").concat(driver_id,\"/\"));case 2:return _context4.abrupt(\"return\",_context4.sent);case 3:case\"end\":return _context4.stop();}},_callee4);}));return _orderAssignRequest.apply(this,arguments);}","map":{"version":3,"names":["axios","useQuery","HOST","BASE_URL_ORDERS","concat","BASE_URL_ORDER_ASSIGN","fetchOrdersByPage","_fetchOrdersByPage","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","page","_args","wrap","_callee$","_context","prev","next","length","undefined","get","params","abrupt","sent","stop","fetchOrdersByDriver","carId","fetchNewOrders","status","then","_ref","data","results","submitOrder","_x","_submitOrder","_callee2","_callee2$","_context2","post","QueryNewOrders","time","queryFn","queryKey","refetchInterval","retry","onError","error","console","changeOrderStatus","_x2","_x3","_changeOrderStatus","_callee3","order_id","order_status","_callee3$","_context3","patch","orderAssignRequest","_x4","_x5","_orderAssignRequest","_callee4","driver_id","_callee4$","_context4"],"sources":["/Users/admin/Desktop/projects/wetop/taxi/frontend/src/services/orderService.js"],"sourcesContent":["import axios from 'axios';\nimport { useQuery } from '@tanstack/react-query';\nimport { HOST } from './api';\n\nconst BASE_URL_ORDERS = `${HOST}/orders/`;\nconst BASE_URL_ORDER_ASSIGN = `${HOST}/assign-order/`;\n\nexport async function fetchOrdersByPage(page = 1) {\n  return await axios.get(BASE_URL_ORDERS, {\n    params: {\n      page: page,\n    },\n  });\n}\n\nexport const fetchOrdersByDriver = (carId) => {\n  return axios.get(\n    BASE_URL_ORDERS + `?status=assigned&status=confirmed&driver=${carId}`,\n  );\n};\n\nexport const fetchNewOrders = (status = '') =>\n  axios\n    .get(BASE_URL_ORDERS, {\n      params: {\n        status: status,\n      },\n    })\n    .then(({ data }) => data?.results);\n\nexport async function submitOrder(data) {\n  return await axios.post(BASE_URL_ORDERS, data);\n}\n\nexport const QueryNewOrders = (time) =>\n  useQuery({\n    queryFn: () => fetchNewOrders('new'),\n    queryKey: ['newOrders'],\n    refetchInterval: time,\n    retry: 5,\n    onError: (error) => {\n      console.error(error);\n    },\n  });\n\nexport async function changeOrderStatus(order_id, order_status) {\n  return await axios.patch(BASE_URL_ORDERS + `${order_id}/`, {\n    status: order_status,\n  });\n}\n\nexport async function orderAssignRequest(order_id, driver_id) {\n  return await axios.post(BASE_URL_ORDER_ASSIGN + `${order_id}/${driver_id}/`);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}