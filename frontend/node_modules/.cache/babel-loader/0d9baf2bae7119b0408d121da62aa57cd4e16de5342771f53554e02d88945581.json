{"ast":null,"code":"import styles from'./Barmen.module.scss';import Header from'./Header/Header';import Form from'./Form/Form';import Map from'../../components/Map/Map';import React,{useEffect}from'react';import changeMeta from'../../helpers/changeMeta';import{BarmenProvider}from'./BarmenContext';import OrdersList from'./OrdersList/OrdersList';import{useQuery}from'@tanstack/react-query';import{fetchOrdersByPage}from'../../services/orderService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PAGE_TITLE='Бармен - \"БКФ Такси\"';var PAGE_FAVICON='/favicon_barmen.ico';function Barmen(){useEffect(function(){return changeMeta(PAGE_TITLE,PAGE_FAVICON);},[]);var _useQuery=useQuery({queryFn:function queryFn(){return fetchOrdersByPage().then(function(res){var _res$data;return(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.results;});},queryKey:['orders'],refetchInterval:3000,retry:5,onError:function onError(error){alert('Не удалось загрузить список заказов');}}),_useQuery$data=_useQuery.data,orders=_useQuery$data===void 0?[]:_useQuery$data;return/*#__PURE__*/_jsx(\"div\",{className:styles.container_barmen,children:/*#__PURE__*/_jsxs(BarmenProvider,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"main\",{className:styles.main,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.left,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.form,children:/*#__PURE__*/_jsx(Form,{})}),/*#__PURE__*/_jsx(\"div\",{className:styles.orders_list,children:orders.length>0?/*#__PURE__*/_jsx(OrdersList,{orders:orders}):/*#__PURE__*/_jsx(\"span\",{className:styles.no_orders,children:\"\\u041D\\u0435\\u0442 \\u0437\\u0430\\u043A\\u0430\\u0437\\u043E\\u0432\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.map,children:/*#__PURE__*/_jsx(Map,{})})]})]})});}export default Barmen;","map":{"version":3,"names":["styles","Header","Form","Map","React","useEffect","changeMeta","BarmenProvider","OrdersList","useQuery","fetchOrdersByPage","jsx","_jsx","jsxs","_jsxs","PAGE_TITLE","PAGE_FAVICON","Barmen","_useQuery","queryFn","then","res","_res$data","data","results","queryKey","refetchInterval","retry","onError","error","alert","_useQuery$data","orders","className","container_barmen","children","main","left","form","orders_list","length","no_orders","map"],"sources":["/Users/admin/Desktop/projects/wetop/taxi/frontend/src/pages/Barmen/Barmen.js"],"sourcesContent":["import styles from './Barmen.module.scss';\nimport Header from './Header/Header';\nimport Form from './Form/Form';\nimport Map from '../../components/Map/Map';\nimport React, { useEffect } from 'react';\nimport changeMeta from '../../helpers/changeMeta';\nimport { BarmenProvider } from './BarmenContext';\nimport OrdersList from './OrdersList/OrdersList';\nimport { useQuery } from '@tanstack/react-query';\nimport { fetchOrdersByPage } from '../../services/orderService';\n\nconst PAGE_TITLE = 'Бармен - \"БКФ Такси\"';\nconst PAGE_FAVICON = '/favicon_barmen.ico';\n\nfunction Barmen() {\n  useEffect(() => changeMeta(PAGE_TITLE, PAGE_FAVICON), []);\n\n  const { data: orders = [] } = useQuery({\n    queryFn: () => fetchOrdersByPage().then((res) => res.data?.results),\n    queryKey: ['orders'],\n    refetchInterval: 3000,\n    retry: 5,\n    onError: (error) => {\n      alert('Не удалось загрузить список заказов');\n    },\n  });\n\n  return (\n    <div className={styles.container_barmen}>\n      <BarmenProvider>\n        <Header />\n        <main className={styles.main}>\n          <div className={styles.left}>\n            <div className={styles.form}>\n              <Form />\n            </div>\n            <div className={styles.orders_list}>\n              {orders.length > 0 ? (\n                <OrdersList orders={orders} />\n              ) : (\n                <span className={styles.no_orders}>Нет заказов</span>\n              )}\n            </div>\n          </div>\n          <div className={styles.map}>\n            <Map />\n          </div>\n        </main>\n      </BarmenProvider>\n    </div>\n  );\n}\n\nexport default Barmen;\n"],"mappings":"AAAA,MAAO,CAAAA,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,MAAM,KAAM,iBAAiB,CACpC,MAAO,CAAAC,IAAI,KAAM,aAAa,CAC9B,MAAO,CAAAC,GAAG,KAAM,0BAA0B,CAC1C,MAAO,CAAAC,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,OAASC,cAAc,KAAQ,iBAAiB,CAChD,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAChD,OAASC,QAAQ,KAAQ,uBAAuB,CAChD,OAASC,iBAAiB,KAAQ,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEhE,GAAM,CAAAC,UAAU,CAAG,sBAAsB,CACzC,GAAM,CAAAC,YAAY,CAAG,qBAAqB,CAE1C,QAAS,CAAAC,MAAMA,CAAA,CAAG,CAChBZ,SAAS,CAAC,iBAAM,CAAAC,UAAU,CAACS,UAAU,CAAEC,YAAY,CAAC,GAAE,EAAE,CAAC,CAEzD,IAAAE,SAAA,CAA8BT,QAAQ,CAAC,CACrCU,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAT,iBAAiB,CAAC,CAAC,CAACU,IAAI,CAAC,SAACC,GAAG,MAAAC,SAAA,QAAAA,SAAA,CAAKD,GAAG,CAACE,IAAI,UAAAD,SAAA,iBAARA,SAAA,CAAUE,OAAO,GAAC,GACnEC,QAAQ,CAAE,CAAC,QAAQ,CAAC,CACpBC,eAAe,CAAE,IAAI,CACrBC,KAAK,CAAE,CAAC,CACRC,OAAO,CAAE,SAAAA,QAACC,KAAK,CAAK,CAClBC,KAAK,CAAC,qCAAqC,CAAC,CAC9C,CACF,CAAC,CAAC,CAAAC,cAAA,CAAAb,SAAA,CARMK,IAAI,CAAES,MAAM,CAAAD,cAAA,UAAG,EAAE,CAAAA,cAAA,CAUzB,mBACEnB,IAAA,QAAKqB,SAAS,CAAEjC,MAAM,CAACkC,gBAAiB,CAAAC,QAAA,cACtCrB,KAAA,CAACP,cAAc,EAAA4B,QAAA,eACbvB,IAAA,CAACX,MAAM,GAAE,CAAC,cACVa,KAAA,SAAMmB,SAAS,CAAEjC,MAAM,CAACoC,IAAK,CAAAD,QAAA,eAC3BrB,KAAA,QAAKmB,SAAS,CAAEjC,MAAM,CAACqC,IAAK,CAAAF,QAAA,eAC1BvB,IAAA,QAAKqB,SAAS,CAAEjC,MAAM,CAACsC,IAAK,CAAAH,QAAA,cAC1BvB,IAAA,CAACV,IAAI,GAAE,CAAC,CACL,CAAC,cACNU,IAAA,QAAKqB,SAAS,CAAEjC,MAAM,CAACuC,WAAY,CAAAJ,QAAA,CAChCH,MAAM,CAACQ,MAAM,CAAG,CAAC,cAChB5B,IAAA,CAACJ,UAAU,EAACwB,MAAM,CAAEA,MAAO,CAAE,CAAC,cAE9BpB,IAAA,SAAMqB,SAAS,CAAEjC,MAAM,CAACyC,SAAU,CAAAN,QAAA,CAAC,+DAAW,CAAM,CACrD,CACE,CAAC,EACH,CAAC,cACNvB,IAAA,QAAKqB,SAAS,CAAEjC,MAAM,CAAC0C,GAAI,CAAAP,QAAA,cACzBvB,IAAA,CAACT,GAAG,GAAE,CAAC,CACJ,CAAC,EACF,CAAC,EACO,CAAC,CACd,CAAC,CAEV,CAEA,cAAe,CAAAc,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}