{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Desktop/projects/wetop/taxi/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import styles from'./DriverPopup.module.scss';import{completeOrderByDriver,refuseOrderByDriver,takeOrderByDriver}from'../../../services/userService';import cx from'classnames';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DriverPopup=function DriverPopup(_ref){var address=_ref.address,orderId=_ref.orderId,orderStatus=_ref.orderStatus;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isRefusedOrder=_useState2[0],setIsRefusedOrder=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),textAreaValue=_useState4[0],setTextAreaValue=_useState4[1];var onClickTakeOrder=function onClickTakeOrder(orderId){return takeOrderByDriver(orderId).catch(function(err){alert(err.response.data.error);});};var onClickCompleteOrder=function onClickCompleteOrder(orderId){return completeOrderByDriver(orderId).catch(function(err){alert(err.response.data.error);});};var onSubmitRefuseOrder=function onSubmitRefuseOrder(e){e.preventDefault();// clearForm();\nrefuseOrderByDriver(orderId,textAreaValue).then(setIsRefusedOrder(false)).catch(function(err){alert(err.response.data.error);});};return/*#__PURE__*/_jsxs(\"div\",{className:styles.driver_popup,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u0417\\u0430\\u043A\\u0430\\u0437 N\",orderId]}),isRefusedOrder===false?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u0410\\u0434\\u0440\\u0435\\u0441:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",address]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.btns,children:[orderStatus==='confirmed'?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return onClickCompleteOrder(orderId);},className:styles.btn,children:\"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"}):/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return onClickTakeOrder(orderId);},className:styles.btn,children:\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setIsRefusedOrder(true);},className:cx(styles.btn,styles.btn_reject),children:\"\\u041E\\u0442\\u043A\\u043B\\u043E\\u043D\\u0438\\u0442\\u044C\"})]})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmitRefuseOrder,children:[/*#__PURE__*/_jsx(\"textarea\",{value:textAreaValue,onChange:function onChange(e){return setTextAreaValue(e.target.value);},rows:5,className:styles.textarea,maxLength:1000,required:true,children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0443 \\u043E\\u0442\\u043A\\u0430\\u0437\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.btns,children:[/*#__PURE__*/_jsx(\"button\",{type:'submit',className:cx(styles.btn,styles.btn_reject),children:\"\\u041E\\u0442\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C\\u0441\\u044F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setIsRefusedOrder(false);},className:styles.btn,children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})]})]})})]});};export default DriverPopup;","map":{"version":3,"names":["React","useState","styles","completeOrderByDriver","refuseOrderByDriver","takeOrderByDriver","cx","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","DriverPopup","_ref","address","orderId","orderStatus","_useState","_useState2","_slicedToArray","isRefusedOrder","setIsRefusedOrder","_useState3","_useState4","textAreaValue","setTextAreaValue","onClickTakeOrder","catch","err","alert","response","data","error","onClickCompleteOrder","onSubmitRefuseOrder","e","preventDefault","then","className","driver_popup","children","btns","onClick","btn","btn_reject","onSubmit","value","onChange","target","rows","textarea","maxLength","required","type"],"sources":["/Users/admin/Desktop/projects/wetop/taxi/frontend/src/pages/Driver/DriverPopup/DriverPopup.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport styles from './DriverPopup.module.scss';\nimport {\n  completeOrderByDriver,\n  refuseOrderByDriver,\n  takeOrderByDriver,\n} from '../../../services/userService';\nimport cx from 'classnames';\n\nconst DriverPopup = ({ address, orderId, orderStatus }) => {\n  const [isRefusedOrder, setIsRefusedOrder] = useState(false);\n  const [textAreaValue, setTextAreaValue] = useState('');\n\n  const onClickTakeOrder = (orderId) => {\n    return takeOrderByDriver(orderId).catch((err) => {\n      alert(err.response.data.error);\n    });\n  };\n\n  const onClickCompleteOrder = (orderId) => {\n    return completeOrderByDriver(orderId).catch((err) => {\n      alert(err.response.data.error);\n    });\n  };\n\n  const onSubmitRefuseOrder = (e) => {\n    e.preventDefault();\n    // clearForm();\n    refuseOrderByDriver(orderId, textAreaValue)\n      .then(setIsRefusedOrder(false))\n      .catch((err) => {\n        alert(err.response.data.error);\n      });\n  };\n\n  return (\n    <div className={styles.driver_popup}>\n      <h3>Заказ N{orderId}</h3>\n      {isRefusedOrder === false ? (\n        <>\n          <p>\n            <b>Адрес:</b>\n            <br />\n            <br /> {address}\n          </p>\n          <div className={styles.btns}>\n            {orderStatus === 'confirmed' ? (\n              <button\n                onClick={() => onClickCompleteOrder(orderId)}\n                className={styles.btn}>\n                Завершить заказ\n              </button>\n            ) : (\n              <button\n                onClick={() => onClickTakeOrder(orderId)}\n                className={styles.btn}>\n                Подтвердить заказ\n              </button>\n            )}\n            <button\n              onClick={() => setIsRefusedOrder(true)}\n              className={cx(styles.btn, styles.btn_reject)}>\n              Отклонить\n            </button>\n          </div>\n        </>\n      ) : (\n        <>\n          <form onSubmit={onSubmitRefuseOrder}>\n            <textarea\n              value={textAreaValue}\n              onChange={(e) => setTextAreaValue(e.target.value)}\n              rows={5}\n              className={styles.textarea}\n              maxLength={1000}\n              required={true}>\n              Введите причину отказа\n            </textarea>\n            <div className={styles.btns}>\n              <button\n                type={'submit'}\n                className={cx(styles.btn, styles.btn_reject)}>\n                Отказаться\n              </button>\n              <button\n                onClick={() => setIsRefusedOrder(false)}\n                className={styles.btn}>\n                Назад\n              </button>\n            </div>\n          </form>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default DriverPopup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}