{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport axios from 'axios';\nimport { useQuery } from '@tanstack/react-query';\nconst BASE_URL_ORDERS = 'http://127.0.0.1:8000/api/orders/';\nconst BASE_URL_CARS = 'http://127.0.0.1:8000/api/users/';\nconst BASE_URL_DRIVER_INFO = 'http://127.0.0.1:8000/api/users/me/';\nexport async function fetchOrders() {\n  let page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n  return await axios.get(BASE_URL_ORDERS, {\n    params: {\n      page: page\n    }\n  });\n}\nexport async function submitOrder(data) {\n  return await axios.post(BASE_URL_ORDERS, data);\n}\nexport const QueryNewOrders = time => {\n  _s();\n  return useQuery({\n    queryFn: () => fetchOrders().then(data => {\n      // console.log('orders', data);\n      return data === null || data === void 0 ? void 0 : data.data.results;\n    }),\n    queryKey: [\"newOrders\"],\n    refetchInterval: time,\n    retry: 5,\n    onError: error => {\n      alert(error);\n    }\n  });\n};\n_s(QueryNewOrders, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n  return [useQuery];\n});\n_c = QueryNewOrders;\nexport async function submitAddCar(data) {\n  return await axios.post(BASE_URL_CARS, data);\n}\nexport async function fetchCars() {\n  return await axios.get(BASE_URL_CARS);\n}\nexport const QueryCars = time => {\n  _s2();\n  return useQuery({\n    queryFn: () => fetchCars().then(response => {\n      // console.log('cars', response);\n      return response === null || response === void 0 ? void 0 : response.data;\n    }),\n    queryKey: [\"cars\"],\n    refetchInterval: time,\n    retry: 5,\n    onError: error => {\n      alert(error);\n    }\n  });\n};\n_s2(QueryCars, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n  return [useQuery];\n});\n_c2 = QueryCars;\nexport const getDriverInfoByToken = () => {\n  axios.get(`http://127.0.0.1:8000/api/users/me/`, {\n    headers: {\n      'Content-Type': 'application/json',\n      'authorization': `Token ${token}`\n    }\n  }).then(res => {\n    setCarId(res.data.id);\n    setDriverName(res.data.first_name);\n    setDriverPhone(res.data.phone);\n    setCarNumber(res.data.car_number);\n  }).catch(err => {\n    alert('Не удалось получить данные водителя по токену', err);\n  });\n};\n\n// export const {data: orders = [], isLoading} = useQuery({\n//   queryFn: () => fetchOrders()\n//     .then((data) => {\n//       setPrevPage(data?.data.previous);\n//       setNextPage(data?.data.next);\n//       return data?.data.results\n//     }),\n//   queryKey: [\"orders\"],\n//   refetchInterval: 3000,\n//   retry: 5,\n//   onError: (error) => {alert(error)}\n// });\nvar _c, _c2;\n$RefreshReg$(_c, \"QueryNewOrders\");\n$RefreshReg$(_c2, \"QueryCars\");","map":{"version":3,"names":["axios","useQuery","BASE_URL_ORDERS","BASE_URL_CARS","BASE_URL_DRIVER_INFO","fetchOrders","page","arguments","length","undefined","get","params","submitOrder","data","post","QueryNewOrders","time","_s","queryFn","then","results","queryKey","refetchInterval","retry","onError","error","alert","_c","submitAddCar","fetchCars","QueryCars","_s2","response","_c2","getDriverInfoByToken","headers","token","res","setCarId","id","setDriverName","first_name","setDriverPhone","phone","setCarNumber","car_number","catch","err","$RefreshReg$"],"sources":["/Users/admin/Desktop/projects/wetop/taxi/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\nimport {useQuery} from '@tanstack/react-query';\n\nconst BASE_URL_ORDERS = 'http://127.0.0.1:8000/api/orders/';\nconst BASE_URL_CARS = 'http://127.0.0.1:8000/api/users/';\nconst BASE_URL_DRIVER_INFO = 'http://127.0.0.1:8000/api/users/me/';\n\n\nexport async function fetchOrders (page = 1) {\n  return await axios.get(BASE_URL_ORDERS, {\n    params: {\n      page: page,\n    }\n  });\n}\n\nexport async function submitOrder (data) {\n  return await axios.post(BASE_URL_ORDERS, data);\n}\n\nexport const QueryNewOrders = (time) => useQuery({\n  queryFn: () => fetchOrders()\n    .then((data) => {\n      // console.log('orders', data);\n      return data?.data.results\n    }),\n  queryKey: [\"newOrders\"],\n  refetchInterval: time,\n  retry: 5,\n  onError: (error) => {alert(error)}\n});\n\n\nexport async function submitAddCar (data) {\n  return await axios.post(BASE_URL_CARS, data);\n}\n\nexport async function fetchCars () {\n  return await axios.get(BASE_URL_CARS);\n}\n\nexport const QueryCars = (time) => useQuery({\n  queryFn: () => fetchCars()\n    .then((response) => {\n      // console.log('cars', response);\n      return response?.data\n    }),\n  queryKey: [\"cars\"],\n  refetchInterval: time,\n  retry: 5,\n  onError: (error) => {alert(error)}\n});\n\n\nexport const getDriverInfoByToken = () => {\n  axios.get(`http://127.0.0.1:8000/api/users/me/`,\n    {\n      headers : {\n        'Content-Type': 'application/json',\n        'authorization': `Token ${token}`\n      }\n    }\n  )\n    .then(res => {\n      setCarId(res.data.id);\n      setDriverName(res.data.first_name);\n      setDriverPhone(res.data.phone);\n      setCarNumber(res.data.car_number);\n    })\n    .catch((err) => {alert('Не удалось получить данные водителя по токену', err)})\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// export const {data: orders = [], isLoading} = useQuery({\n//   queryFn: () => fetchOrders()\n//     .then((data) => {\n//       setPrevPage(data?.data.previous);\n//       setNextPage(data?.data.next);\n//       return data?.data.results\n//     }),\n//   queryKey: [\"orders\"],\n//   refetchInterval: 3000,\n//   retry: 5,\n//   onError: (error) => {alert(error)}\n// });\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}